<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>나무시티 광역전철 노선도</title>
  </head>
  <body>
    <div id="linemap"></div>
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="https://unpkg.com/d3-tube-map@latest/dist/d3-tube-map.js"></script>
    <script>
      var container = d3.select('#linemap');
      var width = 1600;
      var height = 1024;
      var map = d3
        .tubeMap()
        .width(width)
        .height(height)
        .margin({
          top: height / 50,
          right: width / 7,
          bottom: height / 10,
          left: width / 7,
        });
      d3.json('./subway.json').then(function (data) {
        container.datum(data).call(map);
        var svg = container.select('svg');

      zoom = d3

        .zoom()

        .scaleExtent([0.5, 6])

        .on('zoom', zoomed);

      var zoomContainer = svg.call(zoom);

      var initialScale = 2;

      var initialTranslate = [100, 200];

      zoom.scaleTo(zoomContainer, initialScale);

      zoom.translateTo(zoomContainer, initialTranslate[0], initialTranslate[1]);

      function zoomed() {

        svg.select('g').attr('transform', d3.event.transform.toString());

      }
      });
  </script> 
  </body>
</html>
